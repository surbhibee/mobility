write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
library(forecast)
setwd("~/Documents/GitHub/airpollution")
y2020 <- read_csv("https://aqicn.org/data-platform/covid19/report/15044-84747aaf/2020/waqi-covid-2020.csv", skip = 4)
y2019q1 <- read_csv("waqi-covid19-airqualitydata-2019Q1.csv", skip = 4)
y2019q2 <- read_csv("waqi-covid19-airqualitydata-2019Q2.csv", skip = 4)
y2018 <- read_csv("waqi-covid19-airqualitydata-2018H1.csv", skip = 4)
y2017 <- read_csv("waqi-covid19-airqualitydata-2017H1.csv", skip = 4)
india <- y2020 %>% filter(Country == "IN")
cities <- india %>% group_by(City) %>% summarise(n = n())
delhi_2020 <- y2020 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q1 <- y2019q1 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2019q2 <- y2019q2 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2018 <- y2018 %>% filter(City == "New Delhi" | City == "Delhi")
delhi_2017 <- y2017 %>% filter(City == "New Delhi" | City == "Delhi")
remove(y2020, y2019q1, y2019q2, y2018, y2017)
delhi <- rbind(delhi_2020, delhi_2019q2, delhi_2019q1, delhi_2018, delhi_2017)
delhi$year <- substr(delhi$Date, 1,4)
delhi$day_month <- substr(delhi$Date, 6,10)
delhi <- delhi %>% filter(day_month != "12-31" & day_month != "12-30")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10.csv")
dat <- delhi %>% filter(Specie == "pm10" & Date >= "2017-01-01") %>% select(year, day_month, max) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "max", values_from = "max")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm10_max.csv")
dat <- delhi %>% filter(Specie == "pm25" & Date >= "2017-01-01" & City == "Delhi") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/pm25.csv")
dat <- delhi %>% filter(Specie == "co" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/CO.csv")
dat <- delhi %>% filter(Specie == "no2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/NO2.csv")
dat <- delhi %>% filter(Specie == "so2" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/SO2.csv")
dat <- delhi %>% filter(Specie == "o3" & Date >= "2017-01-01") %>% select(year, day_month, median) %>% pivot_wider(id_cols = "day_month", names_from = "year", names_prefix = "y", values_from = "median")
dat$day_month <- as.Date(dat$day_month, "%m-%d")
dat <- dat[rev(order(dat$day_month)),]
write_csv(dat, "Delhi/O3.csv")
source('~/.active-rstudio-document', echo=TRUE)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
setwd("~/Documents/GitHub/mobility")
apply <- read_csv("applemobilitytrends-2020-06-22.csv")
google <- read_csv("Google_Global_Mobility_Report.csv")
View(google)
google <- read_csv("Google_Global_Mobility_Report.csv") %>% filter(country_region == "India")
View(google)
View(apply)
apple <- read_csv("applemobilitytrends-2020-06-22.csv") %>% filter(region == "India" | country == "India")
google <- read_csv("Google_Global_Mobility_Report.csv") %>% filter(country_region == "India")
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
setwd("~/Documents/GitHub/mobility")
apple <- read_csv("applemobilitytrends-2020-06-22.csv") %>% filter(region == "India" | country == "India")
google <- read_csv("Google_Global_Mobility_Report.csv") %>% filter(country_region == "India")
View(apple)
?pivot_longer
apple %>% pivot_longer(cols = c(7:length(apple)), names_to = "date")
apple <- apple %>% pivot_longer(cols = c(7:length(apple)), names_to = "date")
apple_national <- apple %>% filter(region == "India")
apple_city <- apple %>% filter(region =! "India")
apple_national <- apple %>% filter(region == "India")
apple_city <- apple %>% filter(region != "India")
google_national <- google %>% filter(sub_region_1 == NA)
google_state <- google %>% filter(sub_region_1 != NA)
apple_national <- apple %>% filter(region == "India")
apple_city <- apple %>% filter(region != "India")
google_national <- google %>% filter(is.na(sub_region_1))
google_state <- google %>% filter(!is.na(sub_region_1))
View(google_national)
View(google_state)
View(google_state)
apple$date <- as.Date(apple$date)
apple_city %>% ggplot() + geom_line(aes(x = date, y = value, color = transportation_type )) +facet_grid(.~region)
apple_city %>% ggplot() + geom_line(aes(x = date, y = value, color = transportation_type )) +facet_wrap(.~region)
apple_city %>% ggplot() + geom_line(aes(x = date, y = value, color = transportation_type ))
apple_city %>% filter(region == "Delhi") %>% ggplot() + geom_line(aes(x = date, y = value, color = transportation_type ))
apple_city %>% filter(region == "Delhi") %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type ))
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
setwd("~/Documents/GitHub/mobility")
apple <- read_csv("applemobilitytrends-2020-06-22.csv") %>% filter(region == "India" | country == "India")
google <- read_csv("Google_Global_Mobility_Report.csv") %>% filter(country_region == "India")
apple <- apple %>% pivot_longer(cols = c(7:length(apple)), names_to = "date")
apple$date <- as.Date(apple$date)
apple_national <- apple %>% filter(region == "India")
apple_city <- apple %>% filter(region != "India")
google_national <- google %>% filter(is.na(sub_region_1))
google_state <- google %>% filter(!is.na(sub_region_1))
apple_city %>% filter(region == "Delhi") %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type ))
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_grid(.~region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_grid(~region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_grid(. ~ region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_wrap(. ~ region)
apple_city$region <- as.factor(apple_city$region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_wrap(. ~ region)
apple_city$region <- as.factor(apple_city$region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_wrap(. ~ region)
apple_city$region <- as.factor(apple_city$region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_wrap( ~ region)
knitr::opts_chunk$set(echo = TRUE)
rm(list = ls())
library(readxl)
library(tidyverse)
library(ggrepel)
setwd("~/Documents/GitHub/mobility")
apple <- read_csv("applemobilitytrends-2020-06-22.csv") %>% filter(region == "India" | country == "India")
google <- read_csv("Google_Global_Mobility_Report.csv") %>% filter(country_region == "India")
apple <- apple %>% pivot_longer(cols = c(7:length(apple)), names_to = "date")
apple$date <- as.Date(apple$date)
apple_national <- apple %>% filter(region == "India")
apple_city <- apple %>% filter(region != "India")
google_national <- google %>% filter(is.na(sub_region_1))
google_state <- google %>% filter(!is.na(sub_region_1))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% ggplot() + geom_point(aes(x = date, y = value, color = transportation_type )) %>% facet_wrap( ~ region)
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% ggplot(aes(x = date, y = value, color = transportation_type )) + geom_point() %>% facet_wrap(. ~ region)
#apple_city$region <- as.factor(apple_city$region)
ggplot(apple_city, aes(x = date, y = value, color = transportation_type )) + geom_point() %>% facet_wrap(. ~ region)
#apple_city$region <- as.factor(apple_city$region)
ggplot(apple_city, aes(x = date, y = value, color = transportation_type )) + geom_point()
?facet_wrap
#apple_city$region <- as.factor(apple_city$region)
ggplot(apple_city, aes(x = date, y = value, color = transportation_type )) + geom_point()
%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
ggplot(apple_city, aes(x = date, y = value, color = transportation_type )) + geom_point() %>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_point()
#%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_line()
#%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth()
#%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.4)
#%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2)
#%>% facet_wrap(vars(region))
#apple_city$region <- as.factor(apple_city$region)
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2)
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2)
#%>% facet_wrap(vars(region))
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + facet_wrap(vars(region))
apple_city  %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + facet_wrap(vars(region))
apple_city  %>% ggplot( aes(x = date, y = value, color = transportation_type )) + geom_smooth(alpha = 0.2) + facet_wrap(vars(region))
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light()
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2)
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light()
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light()
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() + ggtitle("Changes in driving in cities")
ggsave("apple_driving.png")
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() ggtitle("Changes in driving in cities")
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() + ggtitle("Changes in driving in cities")
apple_city %>% filter(transportation_type == "driving") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() + ggtitle("Changes in driving in cities")
ggsave("apple_driving.png")
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() + ggtitle("Changes in driving in cities")
ggsave("apple_walking.png")
apple_city %>% filter(transportation_type == "walking") %>% ggplot( aes(x = date, y = value, color = region )) + geom_smooth(alpha = 0.2) + theme_light() + ggtitle("Changes in walking in cities")
ggsave("apple_walking.png")
apple_city %>% filter(transportation_type == "driving") %>% write.csv(apple_driving.csv)
apple_city %>% filter(transportation_type == "driving") %>% write.csv("apple_driving.csv")
apple_city %>% filter(transportation_type == "walking") %>% write.csv("apple_walking.csv")
View(google_state)
